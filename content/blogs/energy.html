---
title: "Renewable energy production"
output:
  html_document:
    theme: flatly
    highlight: zenburn
    number_sections: yes
    toc: yes
    toc_float: yes
    code_folding: show
editor_options: 
  markdown: 
    wrap: 72
---



<pre class="r"><code>technology &lt;- readr::read_csv(&#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-07-19/technology.csv&#39;)

#get all technologies
labels &lt;- technology %&gt;% 
  distinct(variable, label)

# Get country names using &#39;countrycode&#39; package
technology &lt;- technology %&gt;% 
  filter(iso3c != &quot;XCD&quot;) %&gt;% 
  mutate(iso3c = recode(iso3c, &quot;ROM&quot; = &quot;ROU&quot;),
         country = countrycode(iso3c, origin = &quot;iso3c&quot;, destination = &quot;country.name&quot;),
         country = case_when(
           iso3c == &quot;ANT&quot; ~ &quot;Netherlands Antilles&quot;,
           iso3c == &quot;CSK&quot; ~ &quot;Czechoslovakia&quot;,
           iso3c == &quot;XKX&quot; ~ &quot;Kosovo&quot;,
           TRUE           ~ country))

#make smaller dataframe on energy
energy &lt;- technology %&gt;% 
  filter(category == &quot;Energy&quot;)

# download CO2 per capita from World Bank using {wbstats} package
# https://data.worldbank.org/indicator/EN.ATM.CO2E.PC
co2_percap &lt;- wb_data(country = &quot;countries_only&quot;, 
                      indicator = &quot;EN.ATM.CO2E.PC&quot;, 
                      start_date = 1970, 
                      end_date = 2022,
                      return_wide=FALSE) %&gt;% 
  filter(!is.na(value)) %&gt;% 
  #drop unwanted variables
  select(-c(unit, obs_status, footnote, last_updated))

# get a list of countries and their characteristics
# we just want to get the region a country is in and its income level
countries &lt;-  wb_cachelist$countries %&gt;% 
  select(iso3c,region,income_level)</code></pre>
<p><img src="/blogs/energy_files/figure-html/min-max_renewables-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>As the % of energy generated by renewables goes up, do CO2 per capita
emissions seem to go down?</p>
<pre><code>  labs(title = &#39;Year: {frame_time}&#39;, 
       x = &#39;% renewables&#39;, 
       y = &#39;CO2 per cap&#39;) +
  transition_time(year) +
  ease_aes(&#39;linear&#39;)</code></pre>
<pre class="r"><code>energy %&gt;% 
  select(-label, -category, -group) %&gt;% 
  pivot_wider(names_from = variable, values_from = value) %&gt;% 
  mutate(prop_renewable = (
    elec_hydro+elec_solar+elec_wind+elec_renew_other)/elecprod
    ) %&gt;% 
  select(iso3c, country, year, prop_renewable) %&gt;% 
  left_join(countries, by=&quot;iso3c&quot;) %&gt;% 
  left_join(
    co2_percap %&gt;% select(iso3c, date, value), 
    by=c(&quot;iso3c&quot; = &quot;iso3c&quot;, &quot;year&quot; = &quot;date&quot;)
  ) %&gt;% 
  na.omit() -&gt; all_elec_data

all_elec_data %&gt;% 
  ggplot(aes(x=prop_renewable, y=value)) +
  geom_point(aes(color=income_level)) +
  facet_wrap(~income_level) +
  labs(
    title=&quot;Year: {as.integer(frame_time)}&quot;,
    x = &quot;% renewables&quot;,
    y = &quot;CO2 per cap&quot;
  ) + 
  theme_minimal() +
  theme(legend.position = &quot;none&quot;) +
  transition_time(year) +
  view_follow(fixed_y = TRUE) +
  ease_aes(&#39;linear&#39;) -&gt; anim_plot

animate(anim_plot)</code></pre>
<p><img src="/blogs/energy_files/figure-html/unnamed-chunk-1-1.gif" style="display: block; margin: auto;" /></p>
<blockquote>
<p>Looking at this visualisation it seems there is no correlation between
two variables. The CO2 per capita does not seem to go down as the
percentage of renewables go up. For most of the countries the CO2 per
capita stays the same, while % of renewables change. However, it is
difficult to determine if the statement is true or false just looking
at the animation without running proper tests.</p>
</blockquote>
